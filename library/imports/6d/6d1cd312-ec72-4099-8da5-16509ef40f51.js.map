{"version":3,"sources":["assets\\Main.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import findNum from \"./findNum\";\n\nconst { ccclass, property } = cc._decorator;\n\ninterface ICellInfo {\n    color: cc.Color;\n    pos: cc.Vec2;\n    cell: cc.Node;\n}\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    @property(cc.EditBox)\n    public inputX: cc.EditBox = null;\n    @property(cc.EditBox)\n    public inputY: cc.EditBox = null;\n    @property(cc.Node)\n    public btnPlay: cc.Node = null;\n\n    @property(cc.Node)\n    public cellLayout: cc.Node = null;\n\n    @property(cc.Prefab)\n    public cellItem: cc.Prefab = null;\n\n    private xNum: number = 0;\n    private yNum: number = 0;\n    private cellList: Array<Array<ICellInfo>> = [[]];\n    private colorList: Array<cc.Color> = [];\n\n    onLoad () {\n        this.colorList = [cc.color(255, 0, 0), cc.color(0, 255, 0), cc.color(0, 0, 255), cc.color(255, 255, 0), cc.color(0, 255, 255)];\n\n        this.btnPlay.on(cc.Node.EventType.TOUCH_START, this.onBtnTouchBegan, this);\n        this.btnPlay.on(cc.Node.EventType.TOUCH_END, this.onBtnTouchEnd, this);\n        this.btnPlay.on(cc.Node.EventType.TOUCH_CANCEL, this.onBtnTouchEnd, this);\n    }\n\n    private showBtn (): void {\n        cc.tween(this.btnPlay).\n            set({ scale: 0 }).\n            to(0.1, { scaleX: 1.3, scaleY: 0.9 }).\n            to(0.1, { scaleX: 0.9, scaleY: 1.1 }).\n            to(0.1, { scaleX: 1, scaleY: 1 }).\n            delay(0).\n            call(() => {\n                cc.tween(this.btnPlay).\n                    repeatForever(\n                        cc.tween(this.btnPlay).\n                            to(0.3, { scaleX: 1.1, scaleY: 0.9 }).\n                            to(0.3, { scaleX: 1, scaleY: 1 })).\n                    start()\n\n            }).start();\n\n    }\n\n    private createCell (): void {\n        for (let i = 0; i < 100; ++i) {\n            let child = this.cellLayout.children[i];\n            if (!child) {\n                child = cc.instantiate(this.cellItem);\n                child.parent = this.cellLayout;\n                child.position = cc.Vec3.ZERO;\n            }\n\n            let x = Math.floor(i / 10);\n            let y = i % 10;\n            if (!this.cellList[x]) {\n                this.cellList[x] = [];\n            }\n\n            let color = this.randomColor(x, y);\n            child.color = color;\n\n            this.cellList[x][y] = {\n                cell: child,\n                pos: cc.v2(x + 1, y + 1),\n                color,\n            }\n        }\n\n    }\n\n    private randomColor (x: number, y: number): cc.Color {\n        let color = this.colorList[0];\n        if (x === 0 && y === 0) {\n            return this.colorList[Math.floor(Math.random() * 5)];\n        }\n\n        let up = this.cellList[x][y - 1];\n        let left = this.cellList[x - 1] && this.cellList[x - 1][y];\n        let opt = [0, 0, 0, 0, 0];\n        let totle = 0;\n\n        if (up) {\n            let index = this.colorList.indexOf(up.color);\n            opt[index] = opt[index] + this.xNum / 100;\n            if (opt[index]) {\n                totle += 1;\n            }\n        }\n\n        if (left) {\n            let index = this.colorList.indexOf(left.color);\n            opt[index] = opt[index] + this.xNum / 100;\n            if (opt[index]) {\n                totle += 1;\n            }\n        }\n\n        if (up && left && up.color === left.color) {\n            let index = this.colorList.indexOf(left.color);\n            opt[index] = opt[index] + this.yNum / 100;\n            if (opt[index]) {\n                totle += 1;\n            }\n        }\n\n        let haveP = 0;\n        for (let i = 0; i < opt.length; ++i) {\n            if (opt[i] > 0) {\n                haveP += opt[i];\n            }\n        }\n\n        if (haveP > 1) haveP = 1;\n\n\n        let t = 0, num = Math.random();\n        for (let i = 0; i < 5; ++i) {\n            if (opt[i]) {\n                t = t + opt[i];\n            } else {\n                t = t + (1 - haveP) / (5 - totle)\n            }\n\n            if (t > num) {\n                color = this.colorList[i]\n                break;\n            }\n        }\n\n\n\n        return color;\n    }\n\n    protected onBtnTouchBegan (): void {\n        cc.tween(this.btnPlay).stop();\n        cc.tween(this.btnPlay).\n            set({ color: cc.color(119, 119, 119) }).\n            to(0.02, { scale: 0.8 }).call(() => {\n                cc.tween(this.btnPlay).repeatForever(\n                    cc.tween(this.btnPlay).\n                        to(0.3, { scaleX: 1.1 * .8, scaleY: 0.9 * .8 }).\n                        to(0.3, { scaleX: 1 * .8, scaleY: 1 * .8 })).\n                    start();\n            }).start();\n\n    }\n\n    protected onBtnTouchEnd (): void {\n        cc.tween(this.btnPlay).stop();\n        cc.tween(this.btnPlay).\n            set({ color: cc.color(255, 255, 255) }).\n            to(0.02, { scale: 1 }).call(() => {\n                cc.tween(this.btnPlay).repeatForever(\n                    cc.tween(this.btnPlay).\n                        to(0.3, { scaleX: 1.1, scaleY: 0.9 }).\n                        to(0.3, { scaleX: 1, scaleY: 1 })).\n                    start();\n            }).start();\n    }\n\n    protected onXEditBoxChange (text: string, editbox: cc.EditBox): void {\n        let strP = /^\\d+(\\.\\d+)?$/;\n        text.replace(strP, \"\");\n        editbox.string = text;\n\n        this.xNum = Number(editbox.string);\n    }\n\n    protected onXEditBoxEnd (editbox: cc.EditBox): void {\n\n        this.xNum = Number(editbox.string);\n    }\n\n    protected onYEditBoxChange (text: string, editbox: cc.EditBox): void {\n        let strP = /^\\d+(\\.\\d+)?$/;\n        if (!strP.test(text)) {\n            text = \"\";\n        }\n        this.yNum = Number(editbox.string);\n    }\n\n    protected onYEditBoxEnd (editbox: cc.EditBox): void {\n        this.yNum = Number(editbox.string);\n    }\n\n\n    protected onGenerateClick (): void {\n        this.createCell();\n\n        // this.showBtn();\n\n        // findNum([10, 40, 5, 280], [234, 5, 2, 148, 23], 42);\n    }\n\n}"]}